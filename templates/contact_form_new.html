<div class="contact-form">
    <h3>Send a Message</h3>
    <form id="contactForm" method="POST" action="/api/contact/submit">
        <!-- Name -->
        <div class="form-group">
            <input type="text" name="name" id="name" placeholder="Your Name *" required>
        </div>
        
        <!-- Email -->
        <div class="form-group">
            <input type="email" name="email" id="email" placeholder="Your Email *" required>
        </div>
        
        <!-- Phone -->
        <div class="form-group">
            <input type="tel" name="phone" id="phone" placeholder="Your Phone Number *" required>
        </div>
        
        <!-- Can we text that number? -->
        <div class="form-group">
            <label for="can-text">Can we text that number?</label>
            <select id="can-text" name="can_text" required>
                <option value="" disabled selected>Select an option</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        
        <!-- I am interested in -->
        <div class="form-group">
            <label for="interested-in">I am interested in:</label>
            <select id="interested-in" name="interested_in" required>
                <option value="" disabled selected>Select an option</option>
                <option value="business-portraiture">Business Portraiture Shoot (head shots)</option>
                <option value="family-portraiture">Family Portraiture</option>
                <option value="pet-portraiture">Pet Portraiture</option>
                <option value="corporate-event">Corporate Event</option>
                <option value="sporting-event">Sporting Event</option>
                <option value="real-estate">Real Estate Marketing Shoot</option>
                <option value="product-marketing">Product Marketing Shoot</option>
                <option value="artist-band">Artist/Band Promotional shoot</option>
                <option value="other">Other</option>
            </select>
        </div>
        
        <!-- Other text box (shown when "Other" is selected) -->
        <div class="form-group" id="other-text-group" style="display: none;">
            <label for="other-text">Please specify:</label>
            <input type="text" name="other_text" id="other-text" placeholder="Please describe what you're interested in">
        </div>
        
        <!-- Date of Event or deadline -->
        <div class="form-group">
            <label for="event-date">Date of Event or deadline:</label>
            <input type="date" name="event_date" id="event-date">
        </div>
        
        <!-- How did you hear about my services? -->
        <div class="form-group">
            <label>How did you hear about my services?</label>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="how_heard" value="facebook"> Facebook
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="how_heard" value="instagram"> Instagram
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="how_heard" value="google"> Google
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="how_heard" value="printed-ad"> Printed ad
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="how_heard" value="referral"> Referral
                </label>
            </div>
        </div>
        
        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary" id="submitBtn">Send Message</button>
        
        <!-- Status Message -->
        <div id="formStatus" class="form-status" style="display: none;"></div>
    </form>
    
    <!-- Footer Message -->
    <div class="form-footer">
        <p>*I monitor this form daily and will reach out to you as soon as I am able and usually the same day.</p>
        <p><strong>Thank You for your interest in my photography services and I look forward to chatting with you.</strong></p>
        <p><em>Rick</em></p>
    </div>
</div>

<style>
/* Contact Form Specific Styles */
.form-group label {
    display: block;
    color: #ccc;
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
    font-family: 'Poppins', sans-serif;
}

.form-group input[type="date"] {
    width: 100%;
    padding: 0.75rem;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    color: #fff;
    font-size: 1rem;
}

.form-group input[type="date"]:focus {
    outline: none;
    border-color: #ff6b35;
    box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2);
}

/* Checkbox Group Styling */
.checkbox-group {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.checkbox-label {
    display: flex;
    align-items: center;
    color: #ccc;
    font-size: 0.95rem;
    cursor: pointer;
    transition: color 0.2s ease;
}

.checkbox-label:hover {
    color: #fff;
}

.checkbox-label input[type="checkbox"] {
    width: auto;
    margin-right: 0.75rem;
    cursor: pointer;
    accent-color: #6799c2;
}

/* Form Footer Styling */
.form-footer {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    color: #ccc;
    font-size: 0.9rem;
    line-height: 1.6;
}

.form-footer p {
    margin-bottom: 0.75rem;
}

.form-footer strong {
    color: #fff;
}

.form-footer em {
    color: #6799c2;
    font-style: normal;
}

/* Form Status Messages */
.form-status {
    margin-top: 1rem;
    padding: 1rem;
    border-radius: 4px;
    text-align: center;
    font-weight: 500;
}

.form-status.success {
    background: rgba(76, 175, 80, 0.2);
    border: 1px solid #4caf50;
    color: #4caf50;
}

.form-status.error {
    background: rgba(244, 67, 54, 0.2);
    border: 1px solid #f44336;
    color: #f44336;
}

/* Button Disabled State */
.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}
</style>

<script>
// Show/hide "Other" text field based on dropdown selection
document.getElementById('interested-in').addEventListener('change', function() {
    const otherGroup = document.getElementById('other-text-group');
    const otherInput = document.getElementById('other-text');
    
    if (this.value === 'other') {
        otherGroup.style.display = 'block';
        otherInput.required = true;
    } else {
        otherGroup.style.display = 'none';
        otherInput.required = false;
        otherInput.value = '';
    }
});

// Handle form submission
document.getElementById('contactForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const submitBtn = document.getElementById('submitBtn');
    const formStatus = document.getElementById('formStatus');
    const form = e.target;
    
    // Disable submit button
    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending...';
    formStatus.style.display = 'none';
    
    // Collect form data
    const formData = new FormData(form);
    
    // Convert checkboxes to array
    const howHeard = [];
    formData.getAll('how_heard').forEach(value => howHeard.push(value));
    
    // Build JSON payload
    const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        phone: formData.get('phone'),
        can_text: formData.get('can_text'),
        interested_in: formData.get('interested_in'),
        other_text: formData.get('other_text') || '',
        event_date: formData.get('event_date') || '',
        how_heard: howHeard
    };
    
    try {
        const response = await fetch('/api/contact/submit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
            formStatus.className = 'form-status success';
            formStatus.textContent = 'Thank you! Your message has been sent successfully. I will get back to you soon!';
            formStatus.style.display = 'block';
            form.reset();
        } else {
            throw new Error(result.error || 'Failed to send message');
        }
    } catch (error) {
        formStatus.className = 'form-status error';
        formStatus.textContent = 'Sorry, there was an error sending your message. Please try again or email me directly at rick@fifthelement.photos';
        formStatus.style.display = 'block';
    } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Send Message';
    }
});
</script>
